<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
		"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<!--
  - Mapping file for the Hibernate implementation of the Clinic interface.
-->
<hibernate-mapping auto-import="true" default-lazy="false" default-access="field">

	<class name="petclinic.Vet" table="vets">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="firstName" column="first_name"/>
		<property name="lastName" column="last_name"/>
		<set name="specialties" table="vet_specialties">
			<key column="vet_id"/>
			<many-to-many column="specialty_id" class="petclinic.Specialty"/>
		</set>
	</class>

	<class name="petclinic.Specialty" table="specialties">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="name" column="name"/>
	</class>

	<class name="petclinic.Owner" table="owners">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="firstName" column="first_name"/>
		<property name="lastName" column="last_name"/>
		<property name="address" column="address"/>
		<property name="city" column="city"/>
		<property name="telephone" column="telephone"/>
		<set name="pets" inverse="true" cascade="all">
			<key column="owner_id"/>
			<one-to-many class="petclinic.Pet"/>
		</set>
	</class>

	<class name="petclinic.Pet" table="pets">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="name" column="name"/>
		<property name="birthDate" column="birth_date" type="date"/>
		<many-to-one name="owner" column="owner_id" class="petclinic.Owner"/>
		<many-to-one name="type" column="type_id" class="petclinic.PetType"/>
		<set name="visits" inverse="true" cascade="all">
			<key column="pet_id"/>
			<one-to-many class="petclinic.Visit"/>
		</set>
	</class>

	<class name="petclinic.PetType" table="types">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="name" column="name"/>
	</class>

	<class name="petclinic.Visit" table="visits">
		<id name="id" column="id">
			<generator class="identity"/>
		</id>
		<property name="date" column="visit_date" type="date"/>
		<property name="description" column="description"/>
		<many-to-one name="pet" column="pet_id" class="petclinic.Pet"/>
	</class>

</hibernate-mapping>
